<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width,initial-scale=1.0" name="viewport">
  <link href="<%= BASE_URL %>favicon.ico" rel="icon">
  <title>vue-demo</title>
</head>
<body>
<noscript>
  <strong>We're sorry but vue-demo doesn't work properly without JavaScript enabled. Please enable it to
    continue.</strong>
</noscript>
<div id="app"></div>
<!-- built files will be auto injected -->
</body>
<script>
  !(function () {
    var ua = window.navigator.userAgent;
    var docEl = document.documentElement;
    var html = document.querySelector('html');
    var isAndroid = /Android/i.test(ua);
    var dpr = window.devicePixelRatio || 1;
    var rem = docEl.clientWidth / 10;
    var maxRem = 50;
    // 设置 rem 基准值
    html.style.fontSize = (rem > maxRem ? maxRem : rem) + 'px';

    // Nexus 5 上 rem 值不准，
    // 如：设置100px，getComputedStyle 中的值却为 85px，导致页面错乱
    // 这时需要检查设置的值和计算后的值是否一样，
    // 不一样的话重新设置正确的值
    var getCPTStyle = window.getComputedStyle;
    var fontSize = parseFloat(html.style.fontSize, 10);
    var computedFontSize = parseFloat(getCPTStyle(html)['font-size'], 10);
    if (getCPTStyle && Math.abs(fontSize - computedFontSize) >= 1) {
      var size = fontSize * (fontSize / computedFontSize);
      html.style.fontSize = (size < maxRem ? size : maxRem) + 'px';
    }

    // 设置 data-dpr 属性，留作的 css hack 之用
    html.setAttribute('data-dpr', dpr);

    // 安卓平台额外加上标记类
    if (isAndroid) {
      html.setAttribute('data-platform', 'android');
    }
  })();
</script>
</html>
